{"posts":[{"title":"Hello World","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new &quot;My New Post&quot; More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","link":"/p/4a17b156.html"},{"title":"test","text":"","link":"/p/d87f7e0c.html"},{"title":"记录一次线上服务事故","text":"前言最近两天某个项目的认定模块总是出现问题，好几个老师群里反馈，后面小组成员排查了一下发现是Redis key过期回调没有触发。 先说一下我们这个服务的逻辑，当某个活动被启用时，会自动创建一个缓存，ttl为现在时间距离活动开始时间的长度，然后当key过期时，会自动触发RedisKeyExpirationListener 里面的onMessage，然后再去实现具体的业务。 一直以来Prod和Dev一直是可以正常使用的，然后最近才出现这个问题。 一开始以为是某些活动没有触发到，今天仔细一看是所有都没有触发出来！！ 于是我们就慌了，后面看了一下发现是Redis的某个配置没有开启，就是这个：notify-keyspace-events Ex。 但是又很奇怪，为什么之前一直可以？最近才会出现这个问题呢？（等大佬解答 上图，默认是没有开启这个回调事件的。 于是暂停了SpringBoot服务，然后重新配置了一下Redis，再一顿重启，终于搞定。（图示是我另外一个也是用到这个的模块 太多坑了，有个小伙伴提转MQ异步消费，感觉更稳定！","link":"/p/c5eeaec6.html"},{"title":"RabbitMq 点击Exchanges出现Management API returned status code 500错误解决方法","text":"前言最近项目部署RabbitMQ中间件，使用DEV服务器安装的mq在图形化界面点击Exchanges交换机的时候出现 “Management API returned status code 500 -” 的错误，对于已经很久没玩mq的我有点懵逼。 搜索了一圈，发现新的版本好像默认会关闭UI数据分析可视化查询，然后进去容器里面追加一个配置重启就可以了。 教程首先进入自己的mq容器 docker exec -it rabbitmq /bin/bash 进入到容器以后cd到这个目录，**/etc/rabbitmq/conf.d/** 然后执行这个命令， echo management_agent.disable_metrics_collector = false &gt; management_agent.disable_metrics_collector.conf 重启你的mq容器 docker restart rabbitmq 然后就可以啦！ 写在后面rabbitMq好久没接触过，都忘了怎么玩了，有时间重新学习一下！写这个文章是为了作一下记录，避免以后遇到同样的问题。 而且其实我还有疑问的，为什么我线上部署的版本不用关闭这个也不会出现这样子的错误呢？有时间研究… 借鉴 【RabbitMQ】之解决后台管理页面 Channels 报错提示 RabbitMQ在Docker中安装以及Management API returned status code 500错误)","link":"/p/352b77f0.html"},{"title":"用油猴脚本来自动填写问卷星的调查问卷，分分钟100+","text":"前言最近在写一份调查问卷，用问卷星系统进行填写调查报告，不过这个调查数据也挺水的，只要份数够就行了，所以我就想到可以利用脚本来自动填写问卷。其实之前也有用的Python写的脚本，但是感觉有时候挺麻烦的。 今天搜了一下发现一个很有用的油猴脚本，号称三分钟刷完100份问卷，测试了一下确实可以，但是为了模拟真人填写，我花了20分钟填了387份。想学吗？我教你啊！ 这个脚本食用起来需要一定的编程基础，不过按照我的教程来做，也可以自己搞定！再也不用求爷爷告奶奶去让别人填问卷啦！ 教程安装油猴这个直接浏览器安装插件就好了，根据自己对应的浏览器去安装。 Edge：Tampermonkey Chrome：Tampermonkey 之前在公众号也有写过安装油猴插件的文章，可以看看→[小白必看的油猴插件安装使用教程!!](小白必看的油猴插件安装使用教程!! (qq.com)) 安装脚本安装完油猴插件直接安装脚本就可以了。 油猴脚本：问卷星在线刷 (greasyfork.org) 进入脚本安装网页，点击下图这个按钮就可安装！ 安装好脚本，打开问卷星的问卷网站，看到这个提示，就说明脚本安装成功了，可以开搞了！ 编辑脚本信息安装完脚本以后，需要进入代码编辑页面进行题目答案以及比例的设置。 按照下图的步骤进入代码编辑页面。 进入代码编辑页面，往下滑就可以找到这个**// 定义自己问卷的 url** 的关键字，把下面网址替换成你的问卷星问卷的地址，注意不能把引号什么的搞掉，否则回报错无法运行。 下面的图示就是一种代码错误的提示，因为把网址左边的单引号去掉了，会导致编译时错误。 弄完网址以后，往下面滑下来就可以看到定义参数这个关键词，下面的代码就是来填写我们对应的问卷星题目的答案和答题比例。 参数解释：id代表题目的序号，type代表题目的列表，bili代表选项的比例。 比如：{id: 1, type: ‘单选’, bili: [30, 70]}, 解释：问题1有两个选项，类型是单选，两个选项的比例分别是30%和70%，需要保持选项比例加起来是100%，**多选每个选项都可以100%**。 注意：每个符号要前后匹配上，还有最后的英文逗号不能缺失。 其他类型也是如此，如果是填空，则需要多加一个content代表填空内容，cotent有多少个则bili就要对应多少个。 比如：问题9是填空类型，分别有两个可选的内容是哈哈哈、嘿嘿嘿，然后比例设置50%、50%，代表这两个选项内容的比例。 设置好代码以后，按住Ctrl+S就可以保存代码啦！ 返回问卷星页面，就可以开始愉快的自动化填写了。 错误解决方案有朋友经过安装、补充代码以后发现可以自动填写问题，但是无法自动提交等问题，以下是我对一些错误问题的解决方法，如果你也遇到这个问题，可以尝试跟着搞搞。 提交问卷的时候出现“点击按钮开始智能验证”提醒 默认脚本是没有开启这个点击按钮的，在脚本编辑页面按Ctrl + F 搜索layui-layer-btn0，对应下面的代码修改。 找到以后，对应增加下面的代码（注意不要放错位置）。 12345document.getElementById('SM_BTN_1').click()// 点击后会继续出现需要滑动滑块验证，所以7秒后会自动验证setTimeout(()=&gt;{ slidingSlider();},7000) 对照 按住Ctrl+S可以保存代码。 如果脚本正常运行，流程应该是：开始-随机填写问卷-自动点击提交按钮-自动点击智能验证-等待7秒钟-自动验证滑块-结束。 出现“ 哎呀，出错了 ，点击刷新再来一次(error:n7f0e)”，错误 在代码页面滑到最后，可以看到如下代码，根据下图提示来粘贴复制的代码。 同样在脚本编辑页面按Ctrl + F 搜索 slidingSlider，把函数替换成下面这样子。 12345678910setTimeout(()=&gt;{ // 出现哎呀出错啦，点击刷新再来一次错误 需要重新点击 var nc_1_refresh1_reject = document.getElementById('nc_1_refresh1') if(nc_1_refresh1_reject!=='undefined' || nc_1_refresh1_reject!==null){ nc_1_refresh1_reject.click() setTimeout(()=&gt;{ slidingSlider() },1000) } },1000) 出现”验证失败，请再次点击按钮刷新“错误 这时候需要关闭浏览器然后重新打开问卷，有条件的话更换一下ip。 写在后面先说说这个脚本，真的很有用，以前还不懂的时候，经常是求好多人帮忙去填写这个问卷，甚至去花钱叫别人来刷。而且填写这个问卷也是一个任务而已，不需要质，只需要量。 后面了解了脚本技术以后，就尝试着使用脚本来解放双手等等，今天这个问卷星就用上啦！不过这些脚本都是别的大佬写的，我只是作为一个使用者。 如果你需要数据真实准确，我不建议你使用脚本，也不提倡你使用这个去盈利，脚本是用来学习和便捷我们生活的，不要做违法的事情哦！如果在尝试的过程中遇到问题，可以在后天私聊我，我看到会回复并给出解决方案。 今天就分享到这里，有什么推荐或者想要的软件/网站/资源，欢迎后台留言！","link":"/p/9a4d61d1.html"},{"title":"","text":"业务需求教程准备准备好字体，否则会无法打印中文 POM依赖12345678910111213141516171819202122232425&lt;!-- itext7html转pdf --&gt;&lt;dependency&gt; &lt;groupId&gt;com.itextpdf&lt;/groupId&gt; &lt;artifactId&gt;html2pdf&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt;&lt;/dependency&gt;&lt;!-- 中文字体支持 --&gt;&lt;dependency&gt; &lt;groupId&gt;com.itextpdf&lt;/groupId&gt; &lt;artifactId&gt;font-asian&lt;/artifactId&gt; &lt;version&gt;7.1.13&lt;/version&gt;&lt;/dependency&gt;&lt;!--freemarker模板--&gt;&lt;dependency&gt; &lt;groupId&gt;org.freemarker&lt;/groupId&gt; &lt;artifactId&gt;freemarker&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;5.8.16&lt;/version&gt;&lt;/dependency&gt;","link":"/p/0.html"},{"title":"博客使用B2+CF作为图床","text":"最近博客转为hexo搭建啦，完全静态博客！但是这个图片存储着实让我头疼。 在14年的适合，陆陆续续使用过又拍云和七牛云。 然后七牛那时候还是有临时链接的，只是用着用着突然就没办法用要绑定自己的域名， 刚好那时候是在运营vpao.net，然后就绑定了上去，一直到高一，就没怎么管博客了。 等高考结束后，我才发现我的vpao.net被污染了，这让我很想不通，我又不是什么违规站点， 一直到现在，都是处于污染状态，域名我可是从17年续费到24年啊！ 说远了，虽然现在七牛还有容量，但是没有备案域名也绑定不了。 昨天一直在找存储方案，发现好像可以使用Backblaze进行存储，有免费10GB容量，可通过CloudFlare自定义域名。 虽然对亚太地区不太友好，等有钱了就换国内OSS！ 找了一圈，跟着一位大佬部署了一下，完美搞定~ 有需要的可以看，使用PicGo+CF(Cloudflare)+B2(Backblaze)作为博客图床 顺便说一下博客介绍，一切都是白嫖的 域名，工作室某个师姐友情赠送 博客运行在Vercael 代码存储在Github 评论使用MongoDB免费版存储 图片存储使用Backblaze + CloudFlare 写作使用免费版typora + picgo 暂无其他说明","link":"/p/40faba9d.html"},{"title":"RabbitMQ入门学习","text":"一、MQ入门1.1 消息中间件的协议1. AMQP协议 分布式事务； 消息的持久化； 高性能、高可靠的处理优势； 2. MQTT协议 物联网的重要组成部分。 低延迟、低带宽、不支持事务 3. OpenMessage协议 RocketMQ采用的协议。国内的阿里、雅虎等公司一起创作。 支持事务，持久化 4. Kafka协议 基于TCP/IP协议，采用二进制进行传输。 结构简单，不支持事务，支持持久化 1.2 消息分发机制 ActiveMQ RabbitMQ Kafka RocketMQ 发布订阅 √ √ √ √ 轮询分发 √ √ √ 公平分发 √ √ 重发 √ √ √ 消息拉取 √ √ √ 轮询分发、公平分发它们都是保证消息只能够读取一次。 轮询分发：每个消费者消费的消息总数量是一致的； 公平分发：能者多劳，消费者性能好，处理的请求就会比较多；必须手动应答，不支持自动应答 1.3 消息的高可用集群模式1：Master-Slave：主从共享数据生产者将消息发送到主节点，所有的都节点连接这个消息队列共享这块的数据区域。主节点写入，一旦主节点挂掉，从节点继续服务。 集群模式2：Master-Slave：主从同步数据与Redis的主从同步差不多 集群模式3：多主集群同步部署模式与2差不多，写入是可以任意节点进行写入。 集群模式4：多主集群转发部署模式元数据共享，当查找数据的时候，就会判断消息的元数据是否存在，存在则返回，否则就去问其他的消费者。 集群模式5：Master-Slave与Broker-Cluster组合方案集群模式的总结 消息共享 消息同步 元数据共享 1.4 消息的高可靠 消息的传输：协议保证 消息的存储：持久化 1.5 MQ的使用场景流量消峰、应用解耦、异步处理 在说这个部分的时候，跟自己的业务结合一起去阐述三个场景。 二、RabbitMQ2.1 RabbitMQ安装首先可以进入RabbitMQ官网上查看 RabbitMQ Erlang版本要求 Linux安装视频：https://www.bilibili.com/video/BV1dX4y1V73G?p=9 Windows安装文章：https://www.cnblogs.com/saryli/p/9729591.html Docker安装视频：https://www.bilibili.com/video/BV1dX4y1V73G?p=10 端口15672：通过 http://serverip:15672 访问 RabbitMQ 的 Web 管理界面，默认用户名密码都是 guest端口5672,5671（ used by AMQP 0-9-1 and 1.0 clients without and with TLS ）由AMQP0-9-1和1.0客户机使用，不带和带TLS端口25672：用于节点间和CLI工具通信（Erlang分发服务器端口），并且是从动态范围分配（默认情况下限制为一个端口，计算为AMQP端口+20000） 2.2 RabbitMQ的核心概念生产者、交换机、队列、消费者","link":"/p/16a9afcf.html"},{"title":"利用正则表达式在Vscode上去除空行、注释","text":"写在前面最近被软著搞到疯了，满60页代码、不能出现空行注释等情况。 代码均是在项目copy过来的，所以肯定是有空行和注释的，在word上可以一键去除空行，但是注释就有点麻烦。 于是想到把文字复制到Vscode上面，通过正则来去除这些。 然后6000多行的代码，去除空行和注释以后，剩下4000多，累了… 查询首先在vscode按住CTRL+H，然后输入下面的正则 选中全部查询的输入相对应的正则以后，应该就可以看到有匹配的，这时候就要选择多个查找出来的 去除注释单行注释1//[\\s\\S]*?\\n 块注释1/\\*(.|\\r\\n|\\n)*?\\*/ 所有注释1\\/\\*[\\s\\S]*\\*\\/|\\/\\/.* html注释1&lt;!--(.*?)--&gt; 去除空行1^\\s*(?=\\r?$)\\n 参照 Vscode 快捷操作_vscode删除一列_ (29条消息) VScode使用正则表达式快速删除注释","link":"/p/5623b276.html"},{"title":"","text":"业务需求教程准备POM依赖12345678910111213141516171819202122232425&lt;!-- itext7html转pdf --&gt;&lt;dependency&gt; &lt;groupId&gt;com.itextpdf&lt;/groupId&gt; &lt;artifactId&gt;html2pdf&lt;/artifactId&gt; &lt;version&gt;3.0.2&lt;/version&gt;&lt;/dependency&gt;&lt;!-- 中文字体支持 --&gt;&lt;dependency&gt; &lt;groupId&gt;com.itextpdf&lt;/groupId&gt; &lt;artifactId&gt;font-asian&lt;/artifactId&gt; &lt;version&gt;7.1.13&lt;/version&gt;&lt;/dependency&gt;&lt;!--freemarker模板--&gt;&lt;dependency&gt; &lt;groupId&gt;org.freemarker&lt;/groupId&gt; &lt;artifactId&gt;freemarker&lt;/artifactId&gt;&lt;/dependency&gt;&lt;dependency&gt; &lt;groupId&gt;cn.hutool&lt;/groupId&gt; &lt;artifactId&gt;hutool-all&lt;/artifactId&gt; &lt;version&gt;5.8.16&lt;/version&gt;&lt;/dependency&gt;","link":"/p/0.html"},{"title":"面试官：怎么设计一个部门表？","text":"需求昨天面试遇到的一个问题，要构建一个部门表，基础字段有部门名、部门id。 问，怎么设计这个部门？如果要你写一条SQL，根据部门ID查询出直接子部门和非直接子部门，那要怎么设计？多少个表？ 解决方案表结构设计 123456CREATE TABLE dept ( dept_id INT AUTO_INCREMENT PRIMARY KEY, dept_name VARCHAR(50) NOT NULL, parent_id INT, ancestors VARCHAR(255)); 解释，ancestors 存放的是祖宗的主键值，主要是用来存放本部门的祖宗的。 1234567891011假设部门的关系如下：- A部门: ID=1- B部门: ID=2（父部门是A）- C部门: ID=3（父部门是B）在这种情况下，部门的`ancestors`字段会设置为：- A部门的`ancestors`为空，因为它是顶级部门。- B部门的`ancestors`为`1`，表示A是B的直接上级。- C部门的`ancestors`为`1,2`，表示A是C的顶级上级，B是C的直接上级。 这样子做的好处是，查询直接子部门和非直接子部门只需要遍历这个ancestors 即可，无需借助其他的。如果没有ancestors的帮助，我们需要在代码中通过parent_id逐层逐级的遍历列举以及合并列表。查询的sql也只需要这样子。 12345select * from deptWHERE dept_id IN ( SELECT dept_id FROM dept WHERE find_in_set('查询的ID', ancestors ) )# FIND_IN_SET('2', ancestors) 就是在 ancestors 字段中查找是否存在 '2'，# 如果存在，返回其位置（非零值）。 缺点每次维护表的时候，都要专门去维护ancestors 这个节点，会加大维护成本","link":"/p/4c646377.html"},{"title":"人大金仓创建Postgresql表并设置主键自增","text":"写在前面最近实习了，公司产品用的人大金仓，底层数据库是Postgresql。然后最近在建表，习惯了navicate，用这个一脸懵逼。而且因为需要设置主键自增，在可视化操作那里无法单独添加，很奇怪，会疯狂报错。我观察了其他大佬建的表，都是有一个nextval…啥的，谷歌了一波之后发现这是Postgresql的东西。所以得手动写sql，别人推荐的是加一个关键字就可以了，但是我的一直不可以，所以这个教程先记录一下手动建立序列的方法。 教程第一步 创建序列12345CREATE SEQUENCE 模式.table_name_id_seq; -- 查询select nextval('模式.table_name_id_seq'::regclass); 第二步 创建表12345CREATE TABLE 模式.sys_oper_sql_log ( id BIGINT PRIMARY KEY DEFAULT nextval('trs_cloud.sys_oper_sql_log_id_seq'::regclass), sql_content TEXT , oper_id BIGINT ); 方式二可以直接使用serial关键词来设定，默认id类型是integer，需要手动调整为bigint或者其他 123456789CREATE TABLE trs_cloud.lm_book_place ( id serial PRIMARY KEY , book_location varchar(50) , is_refuse_lend char default '0'::bpchar, create_by varchar(60), create_time timestamp without time zone, update_by varchar(60), update_time timestamp without time zone); 注意人大金仓不像Navicate一样，可视化插入，会提示报错，可能原因是他要先select那个nextval，然后可视化插入会提前先自检不能为空所以用insert into 实测可以用Navicate连接，操作虽然跟Mysql的不同，但是至少比人大金仓好太多，人大总是有奇奇怪怪的bug。 借鉴 https://blog.csdn.net/aaaaaaa1516682014292/article/details/128130697","link":"/p/d60be7ec.html"},{"title":"vue3的el-form表单输入响应式失效问题（input、单选都无法操作）","text":"写在前面刚到公司，摸一下鱼。昨天朋友问了我一个vue3的一个对话框里面input框和单选框都无法输入或者选中，看了代码也没有禁用啥的操作。一切都正常，最后疯狂开启谷歌，发现命名冲突问题了。 教程 从上面可以看到，响应式的名字与model的名字一样，导致了冲突，所以就会出现输入框无法输入，选择框无法选择问题。 解决方法：修改名字为不同即可！","link":"/p/cee62a0f.html"}],"tags":[{"name":"Docker","slug":"Docker","link":"/tags/Docker/"},{"name":"Redis","slug":"Redis","link":"/tags/Redis/"},{"name":"RabbitMQ","slug":"RabbitMQ","link":"/tags/RabbitMQ/"},{"name":"问卷星","slug":"问卷星","link":"/tags/%E9%97%AE%E5%8D%B7%E6%98%9F/"},{"name":"油猴脚本","slug":"油猴脚本","link":"/tags/%E6%B2%B9%E7%8C%B4%E8%84%9A%E6%9C%AC/"},{"name":"Backblaze","slug":"Backblaze","link":"/tags/Backblaze/"},{"name":"CloudFlare","slug":"CloudFlare","link":"/tags/CloudFlare/"},{"name":"正则表达式","slug":"正则表达式","link":"/tags/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"},{"name":"VSCODE","slug":"VSCODE","link":"/tags/VSCODE/"},{"name":"Mysql","slug":"Mysql","link":"/tags/Mysql/"},{"name":"人大金仓,Postgresql","slug":"人大金仓-Postgresql","link":"/tags/%E4%BA%BA%E5%A4%A7%E9%87%91%E4%BB%93-Postgresql/"},{"name":"vue3","slug":"vue3","link":"/tags/vue3/"}],"categories":[{"name":"翻车日志","slug":"翻车日志","link":"/categories/%E7%BF%BB%E8%BD%A6%E6%97%A5%E5%BF%97/"},{"name":"开发日志","slug":"开发日志","link":"/categories/%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/"},{"name":"科技人生","slug":"科技人生","link":"/categories/%E7%A7%91%E6%8A%80%E4%BA%BA%E7%94%9F/"},{"name":"博客日志","slug":"博客日志","link":"/categories/%E5%8D%9A%E5%AE%A2%E6%97%A5%E5%BF%97/"},{"name":"学习笔记","slug":"学习笔记","link":"/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"}],"pages":[{"title":"关于","text":"关于我我是一名后端开发工程师，喜欢折腾，目前大四。","link":"/about/index.html"},{"title":"友情链接","text":"","link":"/links/index.html"},{"title":"关于","text":"","link":"/about/index%20-%20%E5%89%AF%E6%9C%AC.html"},{"title":"即刻短文","text":"","link":"/says/index.html"},{"title":"归档","text":"","link":"/archives/index.html"},{"title":"标签","text":"","link":"/tags/index.html"},{"title":"分类","text":"","link":"/categories/index.html"}]}